Original request / feature

- Add cumulative feedback persistence for pitch roasts and render a final feedback component with sectional view and drilldown.

Challenges

- Needed a client-side persistence layer that is easy to swap for server storage later.
- Avoiding hydration/runtime errors from localStorage in Next.js client components.
- Integrating new UI without disrupting the existing workspace layout.

Successes

- Implemented a typed feedback store with localStorage plus section/overall derivation helpers.
- Hooked roast lifecycle to append per-page feedback (transcript + page context).
- Added a FinalFeedback panel with sectional drilldown, overall stats, and clear control.

Methods that did/didn’t work

- Worked: small `FeedbackStore` interface with module-level subscriptions to broadcast updates.
- Worked: deriving section titles from page text first line with a safe fallback to page number.
- Considered but skipped: server/API-backed storage for now to keep scope minimal; interface allows later swap.

Changes made to the codebase (≤50-line snippets)

```
// lib/feedback-store.ts
export interface FeedbackEntryInput {
  pageNumber: number;
  roast: string;
  transcript: string;
  pageText?: string;
  deckSummary?: string;
  sectionTitle?: string;
}

export const feedbackStore: FeedbackStore = {
  load() { ... },
  append(input) { ... },
  clear() { ... },
  subscribe(listener) { ... },
};
```

```
// hooks/use-roast-session.ts (inside analyzePitch)
if (result.shouldInterrupt && result.roastMessage) {
  feedbackStore.append({
    pageNumber: currentPageRef.current,
    roast: result.roastMessage,
    transcript,
    pageText,
    deckSummary,
    sectionTitle: inferSectionTitle(undefined, pageText, currentPageRef.current),
  });
  triggerRoast(result.roastMessage);
}
```

```
// components/final-feedback.tsx
export function FinalFeedback() {
  const { session, sectionSummaries, overall, clear } = useFeedback();
  ...
  <Button onClick={clear}>Clear feedback</Button>
  {/* Section drilldown list with entries per page */}
}
```
